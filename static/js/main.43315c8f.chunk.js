(this.webpackJsonpcabinet=this.webpackJsonpcabinet||[]).push([[0],{112:function(t,e,n){},113:function(t,e,n){},13:function(t,e,n){t.exports={form:"Login_form__3Vbmo",formTitle:"Login_formTitle__cxTSo",h2:"Login_h2__2veKZ",inputTitle:"Login_inputTitle__FgVd1",formSignIn:"Login_formSignIn__1NYQN",formInputs:"Login_formInputs__21NLB",formButtons:"Login_formButtons__2paKS",formCheckbox:"Login_formCheckbox__3BD6B",signupLink:"Login_signupLink__aKF4F"}},21:function(t,e,n){t.exports={logo:"Header_logo__1uW65",header:"Header_header__10Hwk",loginBlock:"Header_loginBlock__1eOx4",authAvatar:"Header_authAvatar__2ix7R",authBtn:"Header_authBtn__h_Jw5"}},238:function(t,e,n){"use strict";n.r(e);var a,c,r=n(0),i=n.n(r),o=n(50),s=n.n(o),u=(n(112),n(4)),l=(n(113),n(7)),j=n(24),h=n(25),b=n(30),d=n(29),m=n(10),f=n(51),O=f.create({baseURL:"https://my-json-server.typicode.com/dithmaa/demoapi/"}),p=function(){return O.get("people").then((function(t){return t.data}))},x=f.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"eee580e9-41e0-4287-85f4-dd8d66773124"}}),g=function(t){return x.get("profile/"+t).then((function(t){return t.data}))},_={authMe:function(){return x.get("auth/me").then((function(t){return t.data}))},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return x.post("auth/login",{email:t,password:e,rememberMe:n}).then((function(t){return t.data}))},logout:function(){return x.delete("auth/login").then((function(t){return t.data}))}},v={users:[]},A="SET_USERS",N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0,n=e.type;return n===A?Object(l.a)(Object(l.a)({},t),{},{users:e.users}):t},k=n(1),T=function(t){return{isAuth:t.auth.isAuth}},y=n(69),C=n.n(y),S=function(t){var e=function(e){Object(b.a)(a,e);var n=Object(d.a)(a);function a(){return Object(j.a)(this,a),n.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return this.props.isAuth?Object(k.jsx)(t,Object(l.a)({},this.props)):Object(k.jsx)(u.a,{to:"/"})}}]),a}(i.a.Component);return Object(m.b)(T)(e)}((function(t){var e=t.users.map((function(t){return Object(k.jsx)("div",{children:Object(k.jsx)("li",{children:Object(k.jsxs)("div",{className:C.a.item+" flex aic",children:[Object(k.jsx)("div",{className:C.a.avatar,children:Object(k.jsx)("img",{src:t.avatar?t.avatar:"https://media.istockphoto.com/photos/learn-to-love-yourself-first-picture-id1291208214?k=20&m=1291208214&s=170667a&w=0&h=6-AdcacaQelZJy5ASr9A9cmueE6PmMtSabYE72ZYz9w="})}),Object(k.jsx)("span",{className:"name",children:t.name})]})})})}));return Object(k.jsxs)("div",{className:"container mt-5 ",children:[Object(k.jsx)("h2",{className:"tac",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(k.jsxs)("ul",{children:[Object(k.jsx)("p",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439:"}),e]})]})})),D=function(t){Object(b.a)(n,t);var e=Object(d.a)(n);function n(t){return Object(j.a)(this,n),e.call(this,t)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunk()}},{key:"render",value:function(){return Object(k.jsx)(S,Object(l.a)({},this.props))}}]),n}(i.a.Component),L=Object(m.b)((function(t){return{users:t.cabinetPage.users}}),{getUsersThunk:function(){return function(t){p().then((function(e){return t({type:A,users:e})}))}}})(D),w=n(13),B=n.n(w),E=n(239),U=n(240),F=n(23),M=n(21),I=n.n(M),H=function(t){return Object(k.jsxs)("header",{className:I.a.header+" flex jcsb aic",children:[Object(k.jsx)("div",{className:I.a.logo,children:Object(k.jsx)("img",{src:"https://logojinni.com/ru/image/logos/react-446.svg",alt:"logo"})}),Object(k.jsxs)("div",{className:I.a.loginBlock+" flex aic",children:[Object(k.jsx)("div",{className:I.a.authAvatar,children:Object(k.jsx)("img",{src:null===t.authAvatar?"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRulDSF3olTEVxK5pO15lf9pQxBSBdtBin8pM9woDkK-O8P3k7fCeKYLSaUD_Z1on8dzhI&usqp=CAU":t.authAvatar,alt:""})}),t.isAuth?Object(k.jsxs)("div",{children:[t.login," - ",Object(k.jsx)("span",{className:I.a.authBtn,onClick:t.logout,children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(k.jsx)(F.b,{to:"/",children:Object(k.jsx)("span",{className:I.a.authBtn,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},P=function(t){if(!t)return"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0434\u043b\u044f \u0432\u0432\u043e\u0434\u0430"},R=n(107),K=n(70),J=n.n(K),Q=["input","meta"],V=function(t){var e=t.input,n=t.meta,a=Object(R.a)(t,Q),c=n.touched&&n.error;return Object(k.jsxs)("span",{className:J.a.formControl+" "+(c?J.a.error:""),children:[Object(k.jsx)("span",{children:Object(k.jsx)("input",Object(l.a)(Object(l.a)({},e),a))}),c&&Object(k.jsx)("span",{children:n.error})]})},Y={id:null,email:null,login:null,isAuth:!1,authAvatar:null},Z="SET_AUTH_USER_DATA",q="SET_AUTH_AVATAR",z=function(t,e,n,a){return{type:Z,payload:{id:t,email:e,login:n,isAuth:a}}},G=function(){return function(t){_.authMe().then((function(e){if(0===e.resultCode){var n=e.data,a=n.id,c=n.login,r=n.email;t(z(a,r,c,!0)),g(a).then((function(e){var n;t((n=e.photos.small,{type:q,avatar:n}))}))}}))}},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Z:return Object(l.a)(Object(l.a)({},t),e.payload);case q:return Object(l.a)(Object(l.a)({},t),{},{authAvatar:e.avatar});default:return t}},X=(a=30,function(t){if(t.length>a)return"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(a," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}),$=(c=5,function(t){if(t.length<c)return"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(c," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}),tt=Object(E.a)({form:"login"})((function(t){return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("form",{className:B.a.form+" flex fxdc",onSubmit:t.handleSubmit,children:[Object(k.jsx)("h2",{className:B.a.formTitle,children:"\u0412\u0445\u043e\u0434"}),Object(k.jsxs)("div",{className:B.a.formInputs,children:[Object(k.jsxs)("div",{className:B.a.input,children:[Object(k.jsx)("h3",{className:B.a.inputTitle,children:"Email: "}),Object(k.jsx)(U.a,{validate:[P,X,$],type:"text",name:"email",placeholder:"Email",component:V})]}),Object(k.jsxs)("div",{className:B.a.input,children:[Object(k.jsx)("h3",{className:B.a.inputTitle,children:"\u041f\u0430\u0440\u043e\u043b\u044c: "}),Object(k.jsx)(U.a,{validate:[P,X,$],type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",component:V})]})]}),Object(k.jsxs)("div",{className:B.a.formButtons+" flex jcsb aic",children:[Object(k.jsxs)("label",{className:B.a.formCheckbox,children:[Object(k.jsx)(U.a,{type:"checkbox",name:"rememberMe",component:"input"}),Object(k.jsx)("span",{children:"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"})]}),Object(k.jsx)("input",{type:"submit",className:B.a.formSignIn})]}),Object(k.jsx)("a",{href:"#",className:B.a.signupLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})})})),et=Object(m.b)((function(t){return{isAuth:t.auth.isAuth}}),{login:function(t,e,n){return function(a){_.login(t,e,n).then((function(t){0===t.resultCode&&a(G())}))}}})((function(t){return t.isAuth?Object(k.jsx)(u.a,{to:"/cabinet"}):Object(k.jsx)("div",{className:B.a.login,children:Object(k.jsx)(tt,{onSubmit:function(e){console.log(e),t.login(e.email,e.password,e.rememberMe)}})})})),nt=function(){return Object(k.jsxs)("div",{className:"container mt-5",children:[Object(k.jsx)("h2",{className:"tac",children:"\u0412\u0445\u043e\u0434 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(k.jsx)(et,{})]})},at=function(t){Object(b.a)(n,t);var e=Object(d.a)(n);function n(t){return Object(j.a)(this,n),e.call(this,t)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return Object(k.jsx)(H,Object(l.a)({},this.props))}}]),n}(i.a.Component),ct=Object(m.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login,id:t.auth.id,authAvatar:t.auth.authAvatar}}),{getAuthUserData:G,logout:function(){return function(t){_.logout().then((function(e){0===e.resultCode&&t(z(null,null,null,!1))}))}}})(at),rt=function(){return Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)("div",{className:"container",children:Object(k.jsx)(ct,{})}),Object(k.jsxs)(u.d,{children:[Object(k.jsx)(u.b,{path:"/cabinet",element:Object(k.jsx)(L,{})}),Object(k.jsx)(u.b,{path:"/",element:Object(k.jsx)(nt,{})})]})]})},it=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,242)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),r(t),i(t)}))},ot=n(8),st=n(73),ut={authData:[],formData:""},lt="SET_AUTH_DATA",jt="SET_FORM_DATA",ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,e=arguments.length>1?arguments[1]:void 0,n=e.type;switch(n){case lt:return Object(l.a)(Object(l.a)({},t),{},{authData:[].concat(Object(st.a)(t.authData),[e.authData])});case jt:return Object(l.a)(Object(l.a)({},t),{},{formData:[].concat(Object(st.a)(t.formData),[e.formData])});default:return t}},bt=n(106),dt=n(241),mt=Object(ot.c)({cabinetPage:N,loginPage:ht,auth:W,form:dt.a}),ft=Object(ot.d)(mt,Object(ot.a)(bt.a)),Ot=ft;window.store=ft,s.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(F.a,{children:Object(k.jsx)(m.a,{store:Ot,children:Object(k.jsx)(rt,{})})})}),document.getElementById("root")),it()},69:function(t,e,n){t.exports={avatar:"Cabinet_avatar__3tJmq",item:"Cabinet_item__w79LQ"}},70:function(t,e,n){t.exports={formControl:"FormsControls_formControl__1U5MQ",error:"FormsControls_error__2VWGp"}}},[[238,1,2]]]);
//# sourceMappingURL=main.43315c8f.chunk.js.map