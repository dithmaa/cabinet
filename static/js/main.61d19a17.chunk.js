(this.webpackJsonpcabinet=this.webpackJsonpcabinet||[]).push([[0],{112:function(t,e,n){},113:function(t,e,n){},13:function(t,e,n){t.exports={form:"Login_form__3Vbmo",formTitle:"Login_formTitle__cxTSo",h2:"Login_h2__2veKZ",inputTitle:"Login_inputTitle__FgVd1",formSignIn:"Login_formSignIn__1NYQN",formInputs:"Login_formInputs__21NLB",formButtons:"Login_formButtons__2paKS",formCheckbox:"Login_formCheckbox__3BD6B",signupLink:"Login_signupLink__aKF4F"}},21:function(t,e,n){t.exports={logo:"Header_logo__1uW65",header:"Header_header__10Hwk",loginBlock:"Header_loginBlock__1eOx4",authAvatar:"Header_authAvatar__2ix7R",authBtn:"Header_authBtn__h_Jw5"}},238:function(t,e,n){"use strict";n.r(e);var a,c,r=n(0),i=n.n(r),o=n(52),s=n.n(o),u=(n(112),n(4)),l=(n(113),n(6)),j=n(24),h=n(25),b=n(30),d=n(29),m=n(9),f=n(33),O=n(53),p=O.create({baseURL:"https://my-json-server.typicode.com/dithmaa/demoapi/"}),x=function(){return p.get("people").then((function(t){return t.data}))},g=function(t){return p.post("people",{name:t.name,avatar:t.avatar})},_=function(t){return p.delete("people/".concat(t))},v=O.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"eee580e9-41e0-4287-85f4-dd8d66773124"}}),A=function(t){return v.get("profile/"+t).then((function(t){return t.data}))},N={authMe:function(){return v.get("auth/me").then((function(t){return t.data}))},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return v.post("auth/login",{email:t,password:e,rememberMe:n}).then((function(t){return t.data}))},logout:function(){return v.delete("auth/login").then((function(t){return t.data}))}},k={users:[]},T="SET_USERS",C="ADD_USER",S="REMOVE_USER",y=function(t){return function(e){g(t).then((function(t){return e(function(t){return{type:C,userData:t}}(t.data))}))}},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0,n=e.type;switch(n){case T:return Object(l.a)(Object(l.a)({},t),{},{users:e.users});case C:return Object(l.a)(Object(l.a)({},t),{},{users:[].concat(Object(f.a)(t.users),[e.userData])});case S:var a=Object(f.a)(t.users);return a.splice(e.userId-1,1),console.log("\u041d\u043e\u0432\u044b\u0439 users = ",a),Object(l.a)(Object(l.a)({},t),{},{users:a});default:return t}},D=n(240),B=n(239),U=n(34),L=n.n(U),E=n(1),M=Object(B.a)({form:"OwnCabinetForm"})((function(t){return Object(E.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(E.jsx)(D.a,{component:"input",type:"text",name:"name",placeholder:"\u0418\u043c\u044f"}),Object(E.jsx)("button",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})),F=Object(m.b)(null,{addUserThunk:y})((function(t){var e=t.users.map((function(e){return Object(E.jsx)("div",{children:Object(E.jsx)("li",{children:Object(E.jsxs)("div",{className:L.a.item+" flex aic",children:[Object(E.jsx)("div",{className:L.a.avatar,children:Object(E.jsx)("img",{src:e.avatar?e.avatar:"https://media.istockphoto.com/photos/learn-to-love-yourself-first-picture-id1291208214?k=20&m=1291208214&s=170667a&w=0&h=6-AdcacaQelZJy5ASr9A9cmueE6PmMtSabYE72ZYz9w="})}),Object(E.jsx)("span",{className:L.a.name,children:e.name}),Object(E.jsx)("button",{className:L.a.itemButton+" "+L.a.danger,onClick:function(){t.removeUserThunk(e.id)},children:"\u2716"})]})})})}));return Object(E.jsxs)("div",{className:"container mt-5 ",children:[Object(E.jsx)("h2",{className:"tac",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(E.jsxs)("ul",{children:[Object(E.jsx)("p",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439:"}),e]}),Object(E.jsx)(M,Object(l.a)(Object(l.a)({},t),{},{onSubmit:function(e){console.log(e),t.addUserThunk({name:e.name,avatar:null})}})),Object(E.jsx)("p",{children:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptas reiciendis veritatis eaque eveniet excepturi expedita dolores ipsam est provident voluptate quam delectus consequatur, consequuntur rerum repellendus nisi omnis, quae debitis?"})]})})),I=function(t){return{isAuth:t.auth.isAuth}},R=function(t){Object(b.a)(n,t);var e=Object(d.a)(n);function n(t){return Object(j.a)(this,n),e.call(this,t)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunk()}},{key:"render",value:function(){return Object(E.jsx)(F,Object(l.a)({},this.props))}}]),n}(i.a.Component),H=function(t){var e=function(e){Object(b.a)(a,e);var n=Object(d.a)(a);function a(){return Object(j.a)(this,a),n.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return this.props.isAuth?Object(E.jsx)(t,Object(l.a)({},this.props)):Object(E.jsx)(u.a,{to:"/login"})}}]),a}(i.a.Component);return Object(m.b)(I)(e)}(Object(m.b)((function(t){return{users:t.cabinetPage.users}}),{getUsersThunk:function(){return function(t){x().then((function(e){return t({type:T,users:e})}))}},addUserThunk:y,removeUserThunk:function(t){return function(e){_(t).then((function(n){return e(function(t){return{type:S,userId:t}}(t))}))}}})(R)),q=n(13),P=n.n(q),K=n(23),V=n(21),Y=n.n(V),J=function(t){return Object(E.jsxs)("header",{className:Y.a.header+" flex jcsb aic",children:[Object(E.jsx)("div",{className:Y.a.logo,children:Object(E.jsx)("img",{src:"https://logojinni.com/ru/image/logos/react-446.svg",alt:"logo"})}),Object(E.jsxs)("div",{className:Y.a.loginBlock+" flex aic",children:[Object(E.jsx)("div",{className:Y.a.authAvatar,children:Object(E.jsx)("img",{src:null===t.authAvatar?"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRulDSF3olTEVxK5pO15lf9pQxBSBdtBin8pM9woDkK-O8P3k7fCeKYLSaUD_Z1on8dzhI&usqp=CAU":t.authAvatar,alt:""})}),t.isAuth?Object(E.jsxs)("div",{children:[t.login," - ",Object(E.jsx)("span",{className:Y.a.authBtn,onClick:t.logout,children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(E.jsx)(K.b,{to:"/login",children:Object(E.jsx)("span",{className:Y.a.authBtn,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},Q=function(t){if(!t)return"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0434\u043b\u044f \u0432\u0432\u043e\u0434\u0430"},Z=n(107),W=n(74),z=n.n(W),G=["input","meta"],X=function(t){var e=t.input,n=t.meta,a=Object(Z.a)(t,G),c=n.touched&&n.error;return Object(E.jsxs)("span",{className:z.a.formControl+" "+(c?z.a.error:""),children:[Object(E.jsx)("span",{children:Object(E.jsx)("input",Object(l.a)(Object(l.a)({},e),a))}),c&&Object(E.jsx)("span",{children:n.error})]})},$={id:null,email:null,login:null,isAuth:!1,authAvatar:null},tt="SET_AUTH_USER_DATA",et="SET_AUTH_AVATAR",nt=function(t,e,n,a){return{type:tt,payload:{id:t,email:e,login:n,isAuth:a}}},at=function(){return function(t){N.authMe().then((function(e){if(0===e.resultCode){var n=e.data,a=n.id,c=n.login,r=n.email;t(nt(a,r,c,!0)),A(a).then((function(e){var n;t((n=e.photos.small,{type:et,avatar:n}))}))}}))}},ct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case tt:return Object(l.a)(Object(l.a)({},t),e.payload);case et:return Object(l.a)(Object(l.a)({},t),{},{authAvatar:e.avatar});default:return t}},rt=(a=30,function(t){if(t.length>a)return"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(a," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}),it=(c=5,function(t){if(t.length<c)return"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(c," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}),ot=Object(B.a)({form:"login"})((function(t){return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("form",{className:P.a.form+" flex fxdc",onSubmit:t.handleSubmit,children:[Object(E.jsx)("h2",{className:P.a.formTitle,children:"\u0412\u0445\u043e\u0434"}),Object(E.jsxs)("div",{className:P.a.formInputs,children:[Object(E.jsxs)("div",{className:P.a.input,children:[Object(E.jsx)("h3",{className:P.a.inputTitle,children:"Email: "}),Object(E.jsx)(D.a,{validate:[Q,rt,it],type:"text",name:"email",placeholder:"Email",component:X})]}),Object(E.jsxs)("div",{className:P.a.input,children:[Object(E.jsx)("h3",{className:P.a.inputTitle,children:"\u041f\u0430\u0440\u043e\u043b\u044c: "}),Object(E.jsx)(D.a,{validate:[Q,rt,it],type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",component:X})]})]}),Object(E.jsxs)("div",{className:P.a.formButtons+" flex jcsb aic",children:[Object(E.jsxs)("label",{className:P.a.formCheckbox,children:[Object(E.jsx)(D.a,{type:"checkbox",name:"rememberMe",component:"input"}),Object(E.jsx)("span",{children:"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"})]}),Object(E.jsx)("input",{type:"submit",className:P.a.formSignIn})]}),Object(E.jsx)("a",{href:"#",className:P.a.signupLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})})})),st=Object(m.b)((function(t){return{isAuth:t.auth.isAuth}}),{login:function(t,e,n){return function(a){N.login(t,e,n).then((function(t){0===t.resultCode&&a(at())}))}}})((function(t){return t.isAuth?Object(E.jsx)(u.a,{to:"/owncabinet"}):Object(E.jsx)("div",{className:P.a.login,children:Object(E.jsx)(ot,{onSubmit:function(e){console.log(e),t.login(e.email,e.password,e.rememberMe)}})})})),ut=function(){return Object(E.jsxs)("div",{className:"container mt-5",children:[Object(E.jsx)("h2",{className:"tac",children:"\u0412\u0445\u043e\u0434 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(E.jsx)(st,{})]})},lt=function(t){Object(b.a)(n,t);var e=Object(d.a)(n);function n(t){return Object(j.a)(this,n),e.call(this,t)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return Object(E.jsx)(J,Object(l.a)({},this.props))}}]),n}(i.a.Component),jt=Object(m.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login,id:t.auth.id,authAvatar:t.auth.authAvatar}}),{getAuthUserData:at,logout:function(){return function(t){N.logout().then((function(e){0===e.resultCode&&t(nt(null,null,null,!1))}))}}})(lt),ht=function(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)("div",{className:"container",children:Object(E.jsx)(jt,{})}),Object(E.jsxs)(u.d,{children:[Object(E.jsx)(u.b,{path:"/owncabinet",element:Object(E.jsx)(H,{})}),Object(E.jsx)(u.b,{path:"/login",element:Object(E.jsx)(ut,{})})]})]})},bt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,242)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),r(t),i(t)}))},dt=n(8),mt={authData:[],formData:""},ft="SET_AUTH_DATA",Ot="SET_FORM_DATA",pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,e=arguments.length>1?arguments[1]:void 0,n=e.type;switch(n){case ft:return Object(l.a)(Object(l.a)({},t),{},{authData:[].concat(Object(f.a)(t.authData),[e.authData])});case Ot:return Object(l.a)(Object(l.a)({},t),{},{formData:[].concat(Object(f.a)(t.formData),[e.formData])});default:return t}},xt=n(106),gt=n(241),_t=Object(dt.c)({cabinetPage:w,loginPage:pt,auth:ct,form:gt.a}),vt=Object(dt.d)(_t,Object(dt.a)(xt.a)),At=vt;window.store=vt,s.a.render(Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(K.a,{children:Object(E.jsx)(m.a,{store:At,children:Object(E.jsx)(ht,{})})})}),document.getElementById("root")),bt()},34:function(t,e,n){t.exports={avatar:"OwnCabinet_avatar__1YWu5",item:"OwnCabinet_item__3JXtM",itemButton:"OwnCabinet_itemButton__1a9fe",danger:"OwnCabinet_danger__1DqnN",name:"OwnCabinet_name__32lRN"}},74:function(t,e,n){t.exports={formControl:"FormsControls_formControl__1U5MQ",error:"FormsControls_error__2VWGp"}}},[[238,1,2]]]);
//# sourceMappingURL=main.61d19a17.chunk.js.map